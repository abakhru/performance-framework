# ============================================================
# Generic k6 Performance Framework — Environment Variables
# Copy this file to .env and fill in real values.
# Edit k6/config/endpoints.json to define which endpoints to test.
# ============================================================

# ---- Target API ----
BASE_URL=https://ai-beta-us-east-2.devo.cloud

# ---- Auth (pick ONE mode — leave unused modes commented out) ----
#
# Mode 1 — Static Bearer token (simplest, recommended for dev)
#
AUTH_TOKEN=

#
# Mode 2 — HTTP Basic auth
#
# AUTH_BASIC_USER=myuser
# AUTH_BASIC_PASS=mypassword

#
# Mode 3 — API Key in a request header (default header: X-API-Key)
#
# AUTH_API_KEY=my-api-key-value
# AUTH_API_KEY_HEADER=X-API-Key

#
# Mode 4 — Keycloak client credentials (OAuth2 client_credentials grant)
# NOTE: only works if the Keycloak client maps to a real user identity.
#
# AUTH_HOST=https://auth.strike48.engineering
# AUTH_REALM=master
# AUTH_CLIENT_ID=
# AUTH_CLIENT_SECRET=

#
# Mode 5 — No auth (public APIs)
#
# AUTH_NONE=true

# ---- Load Profile ----
# smoke  = 2 VUs, 30s — quick sanity check
# ramp   = ramp 0→VUS over RAMP_DURATION, hold DURATION, ramp back
# soak   = sustained load for SOAK_DURATION (endurance / memory leak test)
# stress = step-up to STRESS_VUS across 4 stages (find breaking point)
# spike  = instant burst to SPIKE_VUS for SPIKE_DURATION (resilience test)
LOAD_PROFILE=smoke

# ---- VU / Duration (used by ramp, soak, stress, spike profiles) ----
VUS=10
DURATION=60s
RAMP_DURATION=30s
SOAK_DURATION=10m

# ---- Stress profile ----
# STRESS_VUS=50          # peak VUs for the stress profile (default: 50)

# ---- Spike profile ----
# SPIKE_VUS=100          # peak VUs for the spike (default: 100)
# SPIKE_DURATION=30s     # how long to hold the spike (default: 30s)

# ---- Thresholds (override defaults) ----
# THRESHOLD_ERROR_RATE=0.01   # max error rate — 1% (default)
# THRESHOLD_P95_MS=5000       # p95 latency threshold in ms (default: 5000)
# THRESHOLD_P99_MS=            # p99 threshold — disabled by default
# THRESHOLD_ABORT=false        # abort run on threshold breach (default: false)

# ---- InfluxDB 2.x (dashboard storage) ----
# Start with: just influx-up
# UI at: http://localhost:8086
INFLUXDB_URL=http://localhost:8086
INFLUXDB_ORG=matrix
INFLUXDB_BUCKET=k6
INFLUXDB_TOKEN=matrix-k6-token
